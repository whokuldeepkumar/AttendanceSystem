<div class="login-container">
  <div class="glass-card login-card">
    <h2 class="mb-4">Welcome Back</h2>

    <div class="form-group">
      <label for="mobile">Mobile Number</label>
      <input
        id="mobile"
        type="tel"
        class="glass-input"
        placeholder="10-digit mobile number"
        [ngModel]="mobile()"
        (ngModelChange)="mobile.set($event)"
        [class.error]="errors()['mobile']"
        [disabled]="isLoading()"
        maxlength="10"
      />
      <span *ngIf="errors()['mobile']" class="error-message">{{ errors()['mobile'] }}</span>
    </div>

    <div class="form-group">
      <label for="password">Password</label>
      <input
        id="password"
        type="password"
        class="glass-input"
        placeholder="Enter your password"
        [ngModel]="password()"
        (ngModelChange)="password.set($event)"
        [class.error]="errors()['password']"
        [disabled]="isLoading()"
      />
      <span *ngIf="errors()['password']" class="error-message">{{ errors()['password'] }}</span>
    </div>

    <button
      class="btn btn-primary btn-block mt-4"
      (click)="login()"
      [disabled]="isLoading()"
    >
      <span *ngIf="!isLoading()">Login</span>
      <span *ngIf="isLoading()">Logging in...</span>
    </button>

    <div class="text-center mt-3">
      <p class="register-text">
        Don't have an account? 
        <a href="javascript:void(0)" (click)="openRegisterModal()" class="register-link">Register here</a>
      </p>
    </div>
  </div>

  <!-- Register Modal -->
  <app-modal
    [isOpen]="showRegisterModal()"
    title="Register New User"
    confirmText="Register"
    cancelText="Cancel"
    (confirmed)="registerNewUser()"
    (cancelled)="retryLogin()"
  >
    <div class="form-group">
      <label for="regName">Full Name</label>
      <input
        id="regName"
        type="text"
        class="glass-input"
        placeholder="Enter full name"
        [ngModel]="pendingName()"
        (ngModelChange)="pendingName.set($event)"
      />
    </div>
    <div class="form-group">
      <label for="regMobile">Mobile Number</label>
      <input
        id="regMobile"
        type="tel"
        class="glass-input"
        placeholder="10-digit mobile number"
        [ngModel]="pendingMobile()"
        (ngModelChange)="pendingMobile.set($event)"
        maxlength="10"
      />
    </div>
    <div class="form-group">
      <label for="regPassword">Password</label>
      <input
        id="regPassword"
        type="password"
        class="glass-input"
        placeholder="Enter password"
        [ngModel]="pendingPassword()"
        (ngModelChange)="pendingPassword.set($event)"
      />
    </div>
  </app-modal>
</div>
