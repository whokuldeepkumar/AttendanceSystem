<div class="container bulk-container">
  <!-- Full Page Loader -->
  <div *ngIf="isSaving()" class="full-page-loader">
    <div class="loader-content">
      <div class="spinner"></div>
      <p>Saving attendance...</p>
    </div>
  </div>

  <div class="glass-card header-card">
    <div class="header-content">
      <button class="btn btn-secondary" (click)="goBack()">â† Back</button>
      <h2>Bulk Attendance Marking</h2>
    </div>
  </div>

  <div class="glass-card">
    <div class="date-type-row">
      <div class="date-section">
        <label for="bulkDate">Select Date</label>
        <input id="bulkDate" type="date" class="glass-input" [ngModel]="selectedDate()" (ngModelChange)="selectedDate.set($event)">
      </div>

      <div class="type-section">
        <h3>Select Attendance Type</h3>
        <div class="type-buttons">
        <button class="btn btn-type" [class.active]="selectedType() === 'present'" (click)="selectType('present')">
          âœ“ Present
        </button>
        <!-- <button class="btn btn-type" [class.active]="selectedType() === '1st-half'" (click)="selectType('1st-half')">
          ğŸŒ… 1st Half Day
        </button> -->
        <!-- <button class="btn btn-type" [class.active]="selectedType() === '2nd-half'" (click)="selectType('2nd-half')">
          ğŸŒ† 2nd Half Day
        </button> -->
        <!-- <button class="btn btn-type" [class.active]="selectedType() === 'absent'" (click)="selectType('absent')">
          âŒ Absent
        </button> -->
        <button class="btn btn-type" [class.active]="selectedType() === 'leave'" (click)="selectType('leave')">
          ğŸ“‹ Leave
        </button>
        <button class="btn btn-type" [class.active]="selectedType() === 'sat-off'" (click)="selectType('sat-off')">
          ğŸ“… Saturday Off
        </button>
        <button class="btn btn-type" [class.active]="selectedType() === 'sun-off'" (click)="selectType('sun-off')">
          ğŸ“… Sunday Off
        </button>
        <button class="btn btn-type" [class.active]="selectedType() === 'holiday'" (click)="selectType('holiday')">
          ğŸ‰ Holiday
        </button>
        </div>
      </div>
    </div>
    
    <div *ngIf="selectedType() === 'holiday'" class="holiday-input">
      <label for="holidayName">Holiday Name</label>
      <input id="holidayName" type="text" class="glass-input" placeholder="e.g., Diwali, Christmas, Holi" [ngModel]="holidayName()" (ngModelChange)="holidayName.set($event)">
    </div>
    
    <div class="submit-section">
      <button class="btn btn-primary btn-large" (click)="markAttendance()">
        Mark Attendance
      </button>
    </div>

    <div class="selection-actions">
      <!-- <button class="btn btn-outline" (click)="selectAll()">Select All</button>
      <button class="btn btn-outline" (click)="deselectAll()">Deselect All</button> -->
      <span class="selected-count">{{ selectedEmployees().size }} selected</span>
    </div>

    <div class="table-wrapper">
      <table class="employees-table">
        <thead>
          <tr>
            <th><input type="checkbox" (change)="$event.target.checked ? selectAll() : deselectAll()"></th>
            <th>Name</th>
            <th>Mobile</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let employee of employees()" [class.selected]="selectedEmployees().has(employee.id)">
            <td><input type="checkbox" [checked]="selectedEmployees().has(employee.id)" (change)="toggleEmployee(employee.id)"></td>
            <td>{{ employee.name }}</td>
            <td>{{ employee.mobile }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div style="margin-top: 30px;">
    <h3 style="margin: 0 0 20px 0; font-size: 20px; padding: 0 20px;">Monthly Attendance Report</h3>
    <app-attendance-report-view
      [employeeData]="getEmployeeDayWiseData()"
      [dayNumbers]="getDayNumbers()"
      [isLoading]="false">
    </app-attendance-report-view>
  </div>
</div>